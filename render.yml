services:
  - type: web
    name: climate-monitor-api
    env: python
    plan: free
    buildCommand: pip install -r req.txt
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT
    envVars:
      - key: PYTHONUNBUFFERED
        value: true
    healthCheckPath: /
    healthCheckInterval: 60
    envVarGroups:
      - id: firebase_credentials
        description: Firebase configuration
        envVars:
          - key: FIREBASE_SECRET
            description: Firebase service account JSON (base64 encoded or raw JSON)
            isFile: true
            filePath: firebaseSecret.json